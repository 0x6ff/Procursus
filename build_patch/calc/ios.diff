diff -urN calc-2.12.7.1/file.c calc/file.c
--- calc-2.12.7.1/file.c	2018-09-30 19:11:23.000000000 -0400
+++ calc/file.c	2020-09-04 16:07:14.165823666 -0400
@@ -1367,7 +1367,7 @@
 	ret.len = FILEPOS_BITS/BASEB;
 	ret.v = alloc(ret.len);
 	zclearval(ret);
-	SWAP_HALF_IN_FILEPOS(ret.v, &pos);
+	SWAP_HALF_IN_FILEPOS(ret.v, (HALF *)&pos);
 	ret.sign = 0;
 	ztrim(&ret);
 
diff -urN calc-2.12.7.1/fposval.h calc/fposval.h
--- calc-2.12.7.1/fposval.h	1969-12-31 19:00:00.000000000 -0500
+++ calc/fposval.h	2020-09-04 16:34:28.471625823 -0400
@@ -0,0 +1,36 @@
+/*
+ * DO NOT EDIT -- generated by the Makefile
+ */
+
+
+#if !defined(__FPOSVAL_H__)
+#define __FPOSVAL_H__
+
+
+/* what are our file position & size types? */
+#undef FILEPOS_BITS
+#define FILEPOS_BITS 64
+#undef FILEPOS_LEN
+#define FILEPOS_LEN 8
+#define SWAP_HALF_IN_FILEPOS(dest, src)	memcpy((void *)(dest), (void *)(src), sizeof(FPOS_POS_LEN))
+
+#undef OFF_T_BITS
+#define OFF_T_BITS 64
+#undef OFF_T_LEN
+#define OFF_T_LEN 8
+#define SWAP_HALF_IN_OFF_T(dest, src)		(*(dest) = *(src))
+
+#undef DEV_BITS
+#define DEV_BITS 64
+#undef DEV_LEN
+#define DEV_LEN 8
+#define SWAP_HALF_IN_DEV(dest, src)	memcpy((void *)(dest), (void *)(src), 8)
+
+#undef INODE_BITS
+#define INODE_BITS 64
+#undef INODE_LEN
+#define INODE_LEN 8
+#define SWAP_HALF_IN_INODE(dest, src)	memcpy((void *)(dest), (void *)(src), 8)
+
+
+#endif /* !__FPOSVAL_H__ */
diff -urN calc-2.12.7.1/have_fpos.h calc/have_fpos.h
--- calc-2.12.7.1/have_fpos.h	1969-12-31 19:00:00.000000000 -0500
+++ calc/have_fpos.h	2020-09-04 16:31:06.611426244 -0400
@@ -0,0 +1,17 @@
+/*
+ * DO NOT EDIT -- generated by the Makefile
+ */
+
+
+#if !defined(CALC_HAVE_FPOS_H)
+#define CALC_HAVE_FPOS_H
+
+
+/* do we have fgetpos & fsetpos functions? */
+#undef HAVE_FPOS
+#define HAVE_FPOS 1  /* yes */
+
+typedef fpos_t FILEPOS;
+
+
+#endif /* !CALC_HAVE_FPOS_H */
diff -urN calc-2.12.7.1/have_fpos_pos.h calc/have_fpos_pos.h
--- calc-2.12.7.1/have_fpos_pos.h	1969-12-31 19:00:00.000000000 -0500
+++ calc/have_fpos_pos.h	2020-09-04 16:31:06.611426244 -0400
@@ -0,0 +1,20 @@
+/*
+ * DO NOT EDIT -- generated by the Makefile
+ */
+
+
+#if !defined(CALC_HAVE_FPOS_POS_H)
+#define CALC_HAVE_FPOS_POS_H
+
+
+/* do we have fgetpos & fsetpos functions? */
+#undef HAVE_FPOS_POS
+#define HAVE_FPOS_POS 1  /* yes */
+
+#undef FPOS_POS_BITS
+#undef FPOS_POS_LEN
+#define FPOS_POS_BITS 64
+#define FPOS_POS_LEN 8
+
+
+#endif /* !CALC_HAVE_FPOS_POS_H */
diff -urN calc-2.12.7.1/Makefile calc/Makefile
--- calc-2.12.7.1/Makefile	2018-11-05 10:35:46.000000000 -0500
+++ calc/Makefile	2020-09-04 16:33:51.105771037 -0400
@@ -2751,35 +2751,6 @@
 	fi
 
 have_fpos.h: have_fpos.c ${MAKE_FILE}
-	${Q} ${RM} -f fpos_tmp have_fpos.h
-	${Q} echo 'forming have_fpos.h'
-	${Q} echo '/*' > have_fpos.h
-	${Q} echo ' * DO NOT EDIT -- generated by the Makefile' >> have_fpos.h
-	${Q} echo ' */' >> have_fpos.h
-	${Q} echo '' >> have_fpos.h
-	${Q} echo '' >> have_fpos.h
-	${Q} echo '#if !defined(CALC_HAVE_FPOS_H)' >> have_fpos.h
-	${Q} echo '#define CALC_HAVE_FPOS_H' >> have_fpos.h
-	${Q} echo '' >> have_fpos.h
-	${Q} echo '' >> have_fpos.h
-	${Q} echo '/* do we have fgetpos & fsetpos functions? */' >> have_fpos.h
-	${Q} ${RM} -f have_fpos.o have_fpos${EXT}
-	-${Q} ${LCC} ${HAVE_FPOS} ${ICFLAGS} have_fpos.c -c \
-	    >/dev/null 2>&1; ${TRUE}
-	-${Q} ${LCC} ${ILDFLAGS} have_fpos.o -o have_fpos${EXT} \
-	    >/dev/null 2>&1; ${TRUE}
-	-${Q} ${SHELL} -c "./have_fpos${EXT} > fpos_tmp 2>/dev/null" \
-	    >/dev/null 2>&1; ${TRUE}
-	-${Q} if [ -s fpos_tmp ]; then \
-	    ${CAT} fpos_tmp >> have_fpos.h; \
-	else \
-	    echo '#undef HAVE_FPOS  /* no */' >> have_fpos.h; \
-	    echo '' >> have_fpos.h; \
-	    echo 'typedef long FILEPOS;' >> have_fpos.h; \
-	fi
-	${Q} echo '' >> have_fpos.h
-	${Q} echo '' >> have_fpos.h
-	${Q} echo '#endif /* !CALC_HAVE_FPOS_H */' >> have_fpos.h
 	${Q} ${RM} -f have_fpos${EXT} have_fpos.o fpos_tmp
 	${Q} echo 'have_fpos.h formed'
 	-@if [ -z "${Q}" ]; then \
@@ -2793,37 +2764,6 @@
 	fi
 
 have_fpos_pos.h: have_fpos_pos.c have_fpos.h have_posscl.h ${MAKE_FILE}
-	${Q} ${RM} -f fpos_tmp have_fpos_pos.h
-	${Q} echo 'forming have_fpos_pos.h'
-	${Q} echo '/*' > have_fpos_pos.h
-	${Q} echo ' * DO NOT EDIT -- generated by the Makefile' \
-		>> have_fpos_pos.h
-	${Q} echo ' */' >> have_fpos_pos.h
-	${Q} echo '' >> have_fpos_pos.h
-	${Q} echo '' >> have_fpos_pos.h
-	${Q} echo '#if !defined(CALC_HAVE_FPOS_POS_H)' >> have_fpos_pos.h
-	${Q} echo '#define CALC_HAVE_FPOS_POS_H' >> have_fpos_pos.h
-	${Q} echo '' >> have_fpos_pos.h
-	${Q} echo '' >> have_fpos_pos.h
-	${Q} echo '/* do we have fgetpos & fsetpos functions? */' \
-		>> have_fpos_pos.h
-	${Q} ${RM} -f have_fpos_pos.o have_fpos_pos${EXT}
-	-${Q} ${LCC} ${HAVE_FPOS} ${HAVE_FPOS_POS} \
-		    ${ICFLAGS} have_fpos_pos.c -c >/dev/null 2>&1; ${TRUE}
-	-${Q} ${LCC} ${ILDFLAGS} have_fpos_pos.o -o have_fpos_pos${EXT} \
-		>/dev/null 2>&1; ${TRUE}
-	-${Q} ${SHELL} -c "./have_fpos_pos${EXT} > fpos_tmp 2>/dev/null" \
-	    >/dev/null 2>&1; ${TRUE}
-	-${Q} if [ -s fpos_tmp ]; then \
-	    ${CAT} fpos_tmp >> have_fpos_pos.h; \
-	else \
-	    echo '#undef HAVE_FPOS_POS  /* no */' >> have_fpos_pos.h; \
-	    echo '' >> have_fpos_pos.h; \
-	    echo '#undef FPOS_POS_BITS' >> have_fpos_pos.h; \
-	fi
-	${Q} echo '' >> have_fpos_pos.h
-	${Q} echo '' >> have_fpos_pos.h
-	${Q} echo '#endif /* !CALC_HAVE_FPOS_POS_H */' >> have_fpos_pos.h
 	${Q} ${RM} -f have_fpos_pos${EXT} have_fpos_pos.o fpos_tmp
 	${Q} echo 'have_fpos_pos.h formed'
 	-@if [ -z "${Q}" ]; then \
@@ -2838,28 +2778,6 @@
 
 fposval.h: fposval.c have_fpos.h have_fpos_pos.h have_offscl.h have_posscl.h \
 	   endian_calc.h ${MAKE_FILE}
-	${Q} ${RM} -f fposv_tmp fposval.h
-	${Q} echo 'forming fposval.h'
-	${Q} echo '/*' > fposval.h
-	${Q} echo ' * DO NOT EDIT -- generated by the Makefile' >> fposval.h
-	${Q} echo ' */' >> fposval.h
-	${Q} echo '' >> fposval.h
-	${Q} echo '' >> fposval.h
-	${Q} echo '#if !defined(__FPOSVAL_H__)' >> fposval.h
-	${Q} echo '#define __FPOSVAL_H__' >> fposval.h
-	${Q} echo '' >> fposval.h
-	${Q} echo '' >> fposval.h
-	${Q} echo '/* what are our file position & size types? */' >> fposval.h
-	${Q} ${RM} -f fposval.o fposval${EXT}
-	-${Q} ${LCC} ${ICFLAGS} ${FPOS_BITS} ${OFF_T_BITS} \
-		${DEV_BITS} ${INODE_BITS} fposval.c -c >/dev/null 2>&1; ${TRUE}
-	-${Q} ${LCC} ${ILDFLAGS} fposval.o -o fposval${EXT} >/dev/null \
-	    2>&1; ${TRUE}
-	${Q} ${SHELL} -c "./fposval${EXT} fposv_tmp >> fposval.h 2>/dev/null" \
-	    >/dev/null 2>&1; ${TRUE}
-	${Q} echo '' >> fposval.h
-	${Q} echo '' >> fposval.h
-	${Q} echo '#endif /* !__FPOSVAL_H__ */' >> fposval.h
 	${Q} ${RM} -f fposval${EXT} fposval.o fposv_tmp
 	${Q} echo 'fposval.h formed'
 	-@if [ -z "${Q}" ]; then \
